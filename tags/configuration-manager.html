<configuration-manager>
  <!--
  Copyright 2015 icasdri

  This file is part of PostMaker.

  PostMaker is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  PostMaker is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with PostMaker.  If not, see <http://www.gnu.org/licenses/>.
  -->
  <div class="mui-container">
    <div class="mui-col-md-4 mui-col-lg-4">
      <h2>Configuration</h2>
      <button class="mui-btn">Save to File</button>
      <button class="mui-btn">Load from File</button>
    </div>
    <div class="mui-col-md-8 mui-col-lg-8">
      <h3>Publishers { remark }</h3>
      <container-pubconf each={ v in Store.publishers } pub={ v }></container-pubconf>
      <div id="add-pub-action-div">
        <div id="add-pub-select-field" class="mui-select mui-textfield" >
          <select id="add-pub-select">
            <option each={ k, v in AppConf.PUBLISHER_TYPES } value={ k }>{ v.typeName }</option>
          </select>
        </div>
        <button id="add-pub-fab" class="mui-btn mui-btn--primary mui-btn--fab" onclick={ addPublisherFabClicked }>+</button>
      </div>
    </div>
  </div>
  <script>
    var self = this;
    self.addPublisherFabClicked = function() {
      Store.addPublisher(this["add-pub-select"].value);
    }
    this.remark = "Yay!";
  </script>
  <style scoped>
    #add-pub-action-div {
      float: right;
      margin-top: -5px;
    }
    #add-pub-select-field {
      display: inline-block;
      min-width: 250px;
      margin-right: 5px;
    }
    #add-pub-fab {
      display: inline-block;
    }
  </style>
</configuration-manager>

<container-pubconf>
  <div class="mui-panel" id="pc-header" onclick={ headerClicked }>
    <h4>{ opts.pub.publisherName }</h4>
    <h5 if={ opts.pub.allowedAsPrimary }>Primary Ok</h5>
  </div>
  <pm-collapsible outerclass="mui-panel" vpadding=30 expanded={ isExpanded }>
    <div id="pubconf-mount-point"></div>
  </pm-collapsible>
  <script>
    var self = this;
    self.isExpanded = false;
    self.headerClicked = function() {
      self.isExpanded = !self.isExpanded;
    }
    var mountPoint = this.tags["pm-collapsible"]["pubconf-mount-point"]
    riot.mount(mountPoint, "pubconf-" + opts.pub.publisherType, opts.pub);
  </script>
  <style scoped>
    #pc-header {
      margin-bottom: 0px;
      cursor: pointer;
      cursor: hand;
    }
    #pc-header * {
      display: inline-block;
      margin-top: 0px;
      margin-bottom: 0px;
    }
    #pc-header h5 {
      float: right;
    }
  </style>
</container-pubconf>
